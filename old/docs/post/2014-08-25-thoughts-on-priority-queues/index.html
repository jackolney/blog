    <!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Jack Olney">
		<meta name="description" content="blogging about science and technology">
		<meta name="generator" content="Hugo 0.19" />
		<title>Thoughts on priority queues in C&#43;&#43; &middot; Jack Olney</title>
		<link rel="shortcut icon" href="https://jackolney.github.io/blog/images/favicon.ico">
		<link rel="stylesheet" href="https://jackolney.github.io/blog/css/style.css">
		<link rel="stylesheet" href="https://jackolney.github.io/blog/css/highlight.css">
		

		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
		

		
		<link href="https://jackolney.github.io/blog/index.xml" rel="alternate" type="application/rss+xml" title="Jack Olney" />
		

		<meta property="og:title" content="Thoughts on priority queues in C&#43;&#43;" />
<meta property="og:description" content="Late night thoughts on individual-based modelling practices" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jackolney.github.io/blog/post/2014-08-25-thoughts-on-priority-queues/" />



<meta property="article:published_time" content="2014-08-25T09:41:00&#43;00:00"/>
<meta property="article:modified_time" content="2014-08-25T09:41:00&#43;00:00"/>











	    
	    
<meta itemprop="name" content="Thoughts on priority queues in C&#43;&#43;">
<meta itemprop="description" content="Late night thoughts on individual-based modelling practices">


<meta itemprop="dateModified" content="2014-08-25T09:41:00&#43;00:00" />
<meta itemprop="wordCount" content="653">



<meta itemprop="keywords" content="apple,conference,google,programming,shiny,slack,thesis,writing,apple,apple-watch,bot,c&#43;&#43;,care-cascade,croi,css,ggplot2,google,hiv,hubot,keynote,latex,phd,python,r,sacema,shiny,showtext,slack,thesis,truetype,webfonts,writing," />

	    

  <meta name="twitter:card" content="summary"/>



<meta name="twitter:text:title" content="Thoughts on priority queues in C&#43;&#43;"/>
<meta name="twitter:title" content="Thoughts on priority queues in C&#43;&#43;"/>
<meta name="twitter:description" content="Late night thoughts on individual-based modelling practices"/>
<meta name="twitter:site" content="@https://www.twitter.com/OlneyJack"/>

	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='https://jackolney.github.io/blog/'> <span class="arrow">←</span>Home</a>
	

	
		<a href='https://jackolney.github.io/blog/about'>About me</a>
	

	
	<a class="cta" href="https://jackolney.github.io/blog/index.xml">Subscribe</a>
	
</nav>

        <section id="wrapper">
            <article class="post">
                <header>
                    <h1>Thoughts on priority queues in C&#43;&#43;</h1>
                    <h2 class="headline">
                    August 25, 2014 
                    <br>
                    
                    
                        
                            <a href="https://jackolney.github.io/blog/tags/c&#43;&#43;">C&#43;&#43;</a>
                        
                    
                    
                    </h2>
                </header>
                <section id="post-body">
                    

<p>Taking comfort in the fact that I am sure that nobody will read this site except me, I have decided to procrastinate by writing something about a problem, or perhaps I should say challange that I am currently facing. To add some background, I have written an individual-based time-to-event model that describes a series of events that make up HIV care. I have written this model purely in C++, but as it was my first &ldquo;big&rdquo; model and I was still learning C++ at the time, I have since thought about revisiting the source code and changing the fundamentals of the model.</p>

<h3 id="original-plan-for-the-model">Original plan for the model.</h3>

<p>The model starts by creating an &ldquo;individual&rdquo;. This individual has a set of basic characteristics: gender, age, natural death date etc. The individual is then exposed to an annual hazard of developing HIV. If the individual is unfortunate enough to contract HIV, they have the opportunity to enter HIV care and eventually receive treatment. The way the model handles events occurring through time is by a clever little thing called a priority queue. A priority queue can be thought of as an ordered list that as reshuffles as objects are inserted depending on a set of rules. This can be as basic as the priority queue shown below:</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>  <span style="color: #f8f8f2">priority_queue</span><span style="color: #f92672">&lt;</span><span style="color: #66d9ef">int</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">vector</span><span style="color: #f92672">&lt;</span><span style="color: #66d9ef">int</span><span style="color: #f92672">&gt;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">greater</span><span style="color: #f92672">&lt;</span><span style="color: #66d9ef">int</span><span style="color: #f92672">&gt;</span> <span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">testQ;</span>
</pre></div>

<p>A priority queue can have objects &ldquo;pushed&rdquo; into it that are then ordered according to the compare parameter, which in this case is shown by <code> greater&lt;int&gt; </code>. This means that every object that enters the priority queue, called &ldquo;testQ&rdquo; in this instance, is evaluated and placed in order. The current setup shown above orders the integers in the queue from largest to smallest. The &ldquo;top&rdquo; of the queue contains the smallest value. There are some cool member functions associated with priority queues. For instance, <code>testQ.push()</code> takes an arguement of the integer that we wish to push into the queue. While, <code>testQ.top()</code> will show us the value at the top of the queue (smallest). <code> testQ.pop()</code> is another useful function that has the effect of &ldquo;popping&rdquo; off the top of the queue and removing it. This is particular useful for me as I want to setup a priority queue that I can pass a list of dates to. I want the queue to order the dates with the smallest date, or date closest to the current date, being at the top of the queue. That will allow me to feed my model dates of any size and for it to quickly order them chronologically so I can effectively walk through them &ldquo;popping&rdquo; them off as I go.</p>

<h3 id="old-setup">Old setup.</h3>

<p>I currently use something similar to above, in that I pass dates to the queue and then &ldquo;pop&rdquo; them off. The slight problem with this approach is that when the date of an event comes to the top of the priority queue, I need to be able to call a specific function that is due to occur on that specific date. For example, if I wanted to perform an HIV-test on an individual in 2010, I pass the date 2010 to the priority queue and when <code>testQ.top() == 2010</code> I compare an HIV-test &ldquo;flag&rdquo; (which holds the date 2010) to the top of the queue. If the two agree, then we proceed and call the HIV-test function.</p>

<h3 id="future-setup">Future setup.</h3>

<p>Looking back at this, while it is simple, it is slightly crude to be checking the top of the priority queue against a &ldquo;flag&rdquo;. What would be much neater would be to create a <code>class event</code> which has the attributes of <code>time</code> and a function pointer. This would allow me to &ldquo;push&rdquo; a time and function into the queue. When an event comes to the top of the queue, I will be able to access a time and a pointer to the appropriate function.</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #66d9ef">class</span> <span style="color: #a6e22e">eventClass</span> <span style="color: #f8f8f2">{</span>
  <span style="color: #66d9ef">double</span> <span style="color: #f8f8f2">time;</span>
  <span style="color: #66d9ef">void</span> <span style="color: #f8f8f2">(</span><span style="color: #f92672">*</span><span style="color: #f8f8f2">ptr_fun)();</span>
<span style="color: #f8f8f2">};</span>

<span style="color: #f8f8f2">priority_queue</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">eventClass,</span> <span style="color: #f8f8f2">vector</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">eventClass</span><span style="color: #f92672">&gt;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">timeComparison</span> <span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">testQ;</span>
</pre></div>

                </section>
            </article>
            <footer id="post-meta" class="clearfix">
                <a href="https://twitter.com/OlneyJack">
                        <img class="avatar" src="https://jackolney.github.io/blog/images/avatar.png">
                        <div>
                            <span class="dark">Jack Olney</span>
                            <span>Please let me know what you think</span>
                        </div>
                    </a>
                <section id="sharing">
                    <a class="twitter" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fjackolney.github.io%2fblog%2fpost%2f2014-08-25-thoughts-on-priority-queues%2f - Thoughts%20on%20priority%20queues%20in%20C%2b%2b by @OlneyJack"><span class="icon-twitter"> Tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

                </section>
            </footer>

            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'jackolney';
    var disqus_identifier = 'https:\/\/jackolney.github.io\/blog\/post\/2014-08-25-thoughts-on-priority-queues\/';
    var disqus_title = 'Thoughts on priority queues in C\x2b\x2b';
    var disqus_url = 'https:\/\/jackolney.github.io\/blog\/post\/2014-08-25-thoughts-on-priority-queues\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

            <ul id="post-list" class="archive readmore">
    <h3>More...</h3>

    
    
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2017-02-21-croi/">CROI 2017<aside class="dates">Feb 21</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-11-17-thesis/">Writing a PhD Thesis<aside class="dates">Nov 17</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-08-15-ggplot2-font/">Webfonts in ggplot2<aside class="dates">Aug 15</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-06-21-sacema/">SACEMA Quarterly<aside class="dates">Jun 21</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-04-01-shiny/">Shiny Progress Bars<aside class="dates">Apr 1</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-03-09-croi/">CROI 2016<aside class="dates">Mar 9</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-01-09-hubot/">Hubot - a Siri to call my own<aside class="dates">Jan 9</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2015-12-27-apple-watch-health/">Has the Apple Watch improved my fitness?<aside class="dates">Dec 27</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2015-10-16-shiny-cascade/">Interactive Dynamic Models in R<aside class="dates">Oct 16</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2015-09-09-apple-pencil/">Apple Pencil<aside class="dates">Sep 9</aside></a>
        </li>
        
   
</ul>

            <footer id="footer">
    
        <div id="social">

	
	
    <a class="symbol" href="https://www.github.com/jackolney">
        <i class="fa fa-github"></i>
    </a>
    
    <a class="symbol" href="https://www.twitter.com/OlneyJack">
        <i class="fa fa-twitter"></i>
    </a>
    


</div>

    
    <p class="small">
    
        © Copyright 2017 Jack Olney
    
    </p>
</footer>

        </section>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://jackolney.github.io/blog/js/main.js"></script>
<script src="https://jackolney.github.io/blog/js/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-71752366-1', 'auto');
ga('send', 'pageview');
</script>


    </body>
</html>
