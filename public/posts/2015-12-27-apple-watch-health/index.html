<!DOCTYPE html>
<html lang="en-us">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<meta name="theme-color" content="#494f5c">
	<meta name="msapplication-TileColor" content="#494f5c">

<meta itemprop="name" content="Has the Apple Watch improved my fitness?">
<meta itemprop="description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?">


<meta itemprop="datePublished" content="2015-12-27T09:41:00&#43;00:00" />
<meta itemprop="dateModified" content="2015-12-27T09:41:00&#43;00:00" />
<meta itemprop="wordCount" content="1323">



<meta itemprop="keywords" content="R,Apple Watch," />
<meta property="og:title" content="Has the Apple Watch improved my fitness?" />
<meta property="og:description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jackolney.github.io/posts/2015-12-27-apple-watch-health/" />
<meta property="article:published_time" content="2015-12-27T09:41:00&#43;00:00"/>
<meta property="article:modified_time" content="2015-12-27T09:41:00&#43;00:00"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Has the Apple Watch improved my fitness?"/>
<meta name="twitter:description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?"/>

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
	<link rel="shortcut icon" href="/favicon.ico">

	<title>Has the Apple Watch improved my fitness?</title>
	<link rel="stylesheet" href="https://jackolney.github.io/css/style.min.568c54a56780af2a70c45272522247710b69dbfc080b315211fb98381e3796f8.css" integrity="sha256-VoxUpWeArypwxFJyUiJHcQtp2/wICzFSEfuYOB43lvg=">
	
</head>

<body id="page">
	
	<header id="site-header" class="animated slideInUp faster">
		<div class="hdr-wrapper section-inner">
			<div class="hdr-left">
				<div class="site-branding">
					<a href="https://jackolney.github.io/">Jack Olney</a>
				</div>
				<nav class="site-nav hide-in-mobile">
					
				<a href="https://jackolney.github.io/posts/">Posts</a>
				<a href="https://jackolney.github.io/about/">About</a>

				</nav>
			</div>
			<div class="hdr-right hdr-icons">
				<span class="hdr-social hide-in-mobile"><a href="mailto:olney.jack@gmail.com" target="_blank" rel="noopener me" title="Email"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg></a><a href="https://github.com/jackolney" target="_blank" rel="noopener me" title="Github"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a><a href="https://www.linkedin.com/in/jack-olney/" target="_blank" rel="noopener me" title="Linkedin"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-linkedin"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path><rect x="2" y="9" width="4" height="12"></rect><circle cx="4" cy="4" r="2"></circle></svg></a><a href="https://twitter.com/OlneyJack" target="_blank" rel="noopener me" title="Twitter"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a></span><button id="menu-btn" class="hdr-btn" title="Menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button>
			</div>
		</div>
	</header>
	<div id="mobile-menu" class="animated fast">
		<ul>
			<li><a href="https://jackolney.github.io/posts/">Posts</a></li>
			<li><a href="https://jackolney.github.io/about/">About</a></li>
		</ul>
	</div>


	<main class="site-main section-inner animated fadeIn faster">
		<article class="thin">
			<header class="post-header">
				<div class="post-meta"><span>Dec 27, 2015</span></div>
				<h1>Has the Apple Watch improved my fitness?</h1>
			</header>
			<div class="content">
				

<h1 id="overview">Overview<a href="#overview" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>

<p>Having owned an Apple Watch since early May, I have built up a substantial amount of data in Apple&rsquo;s &lsquo;HealthKit&rsquo;, detailing my daily steps from in excess of a year prior to owning the watch to at least six months after. Therefore, a simple analysis of whether the watch has improved my fitness should be possible. Additionally, I can pull out heart-rate data, stair-flight data, exercise data and map a whole bunch of other interesting stuff.</p>

<p>All data is from my iPhone 6+ and my Apple Watch, all analysis was conducted in R and all figures were produced with ggplot2.</p>

<h1 id="setup">Setup<a href="#setup" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>

<p>The first thing to do is it to export the relevant data from &lsquo;HealthKit&rsquo; as a csv file. We do this using the <a href="https://itunes.apple.com/gb/app/qs-access/id920297614?mt=8">QS Access</a> iOS app from the App Store. The app allows you to define the columns by selecting the relevant data to export (e.g. Steps, Heart Rate etc.) and then define rows as being hourly or daily. The simplest way to transfer the csv from iPhone to Mac is via email. Now we can jump right into R and start cleaning the data.</p>

<h2 id="data-cleaning">Data Cleaning<a href="#data-cleaning" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Set the working directory to the folder containing the exported .csv</span>
<span class="kp">setwd</span><span class="p">(</span><span class="s">&#34;~/&#34;</span><span class="p">)</span>

<span class="c1"># Load &#39;dplyr&#39; and &#39;ggplot2&#39; for data analysis and plotting</span>
<span class="kn">require</span><span class="p">(</span>dplyr<span class="p">)</span>
<span class="kn">require</span><span class="p">(</span>ggplot2<span class="p">)</span>

<span class="c1"># Load in the exported .csv file</span>
<span class="c1"># The data I am importing was exported from my iPhone on 4th September, 2015</span>
MyCsvData <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&#34;./HealthData/HealthData_04-09-15.csv&#34;</span><span class="p">)</span>
MyCsvDataHourly <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&#34;./HealthData/HealthDataHourly_04-09-15.csv&#34;</span><span class="p">)</span></code></pre></div>
<p>Probably the most time consuming aspect of any data analysis is cleaning and correctly formatting the data. Here, we must ensure that R can understand the exported date format correctly. To rectify this we define a function <code>FormatData()</code> which takes the entire dataframe as an arguement and returns a dataframe containing the correct date format.</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R">FormatData <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>Data<span class="p">)</span> <span class="p">{</span>

    <span class="c1"># Define the &#39;Start&#39; and &#39;End&#39; columns.</span>
    StartDate <span class="o">&lt;-</span> <span class="kp">as.Date</span><span class="p">(</span>Data<span class="o">$</span>Start<span class="p">,</span>format<span class="o">=</span><span class="s">&#34;%d-%b-%Y %H:%M&#34;</span><span class="p">)</span>
    EndDate <span class="o">&lt;-</span> <span class="kp">as.Date</span><span class="p">(</span>Data<span class="o">$</span>Finish<span class="p">,</span>format<span class="o">=</span><span class="s">&#34;%d-%b-%Y %H:%M&#34;</span><span class="p">)</span>

    <span class="c1"># Turn into a smart dataframe.</span>
    <span class="c1"># if you print a tbl_df to screen only the first 10 rows are shown.</span>
    MyData <span class="o">&lt;-</span> tbl_df<span class="p">(</span>Data<span class="p">)</span>

    <span class="c1"># Cleanup data.names</span>
    <span class="kp">names</span><span class="p">(</span>MyData<span class="p">)[</span><span class="m">1</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;StartTime&#34;</span>
    <span class="kp">names</span><span class="p">(</span>MyData<span class="p">)[</span><span class="m">2</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;EndTime&#34;</span>
    <span class="kp">names</span><span class="p">(</span>MyData<span class="p">)[</span><span class="m">3</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;Calories&#34;</span> <span class="c1"># kcal</span>
    <span class="kp">names</span><span class="p">(</span>MyData<span class="p">)[</span><span class="m">4</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;Distance&#34;</span> <span class="c1"># In miles</span>
    <span class="kp">names</span><span class="p">(</span>MyData<span class="p">)[</span><span class="m">5</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;Flights&#34;</span> <span class="c1"># count</span>
    <span class="kp">names</span><span class="p">(</span>MyData<span class="p">)[</span><span class="m">6</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;HeartRate&#34;</span> <span class="c1"># bpm</span>
    <span class="kp">names</span><span class="p">(</span>MyData<span class="p">)[</span><span class="m">7</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;Steps&#34;</span> <span class="c1"># count</span>

    <span class="c1"># Formatting date. #</span>
    <span class="c1">####################</span>
    <span class="c1"># Code    Value</span>
    <span class="c1"># %d  Day of the month (decimal number)</span>
    <span class="c1"># %m  Month (decimal number)</span>
    <span class="c1"># %b  Month (abbreviated)</span>
    <span class="c1"># %B  Month (full name)</span>
    <span class="c1"># %y  Year (2 digit)</span>
    <span class="c1"># %Y  Year (4 digit)</span>

    <span class="c1"># Deploy and mutate whole dataFrame</span>
    FormatDate <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
        <span class="kp">format</span><span class="p">(</span><span class="kp">strptime</span><span class="p">(</span>TestDate<span class="p">,</span><span class="s">&#34;%d-%b-%Y %H:%M&#34;</span><span class="p">),</span><span class="s">&#34;%d-%m-%Y&#34;</span><span class="p">)</span>
    <span class="p">}</span>

    FormatTime <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
        <span class="kp">format</span><span class="p">(</span><span class="kp">strptime</span><span class="p">(</span>x<span class="p">,</span><span class="s">&#34;%d-%b-%Y %H:%M&#34;</span><span class="p">),</span><span class="s">&#34;%H:%M&#34;</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="c1"># StartDate &lt;- apply(MyData[1],2,FormatDate)</span>
    StartTime <span class="o">&lt;-</span> <span class="kp">apply</span><span class="p">(</span>MyData<span class="p">[</span><span class="m">1</span><span class="p">],</span><span class="m">2</span><span class="p">,</span>FormatTime<span class="p">)</span>
    StartDateTime <span class="o">&lt;-</span> MyData<span class="p">[</span><span class="m">1</span><span class="p">]</span>

    <span class="c1"># EndDate &lt;- apply(MyData[2],2,FormatDate)</span>
    EndTime <span class="o">&lt;-</span> <span class="kp">apply</span><span class="p">(</span>MyData<span class="p">[</span><span class="m">2</span><span class="p">],</span><span class="m">2</span><span class="p">,</span>FormatTime<span class="p">)</span>
    EndDateTime <span class="o">&lt;-</span> MyData<span class="p">[</span><span class="m">2</span><span class="p">]</span>

    <span class="c1"># Pull together a new dataframe</span>
    MyFormattedData <span class="o">&lt;-</span> tbl_df<span class="p">(</span><span class="kt">data.frame</span><span class="p">(</span>
        StartDate<span class="p">,</span>
        StartTime<span class="p">,</span>
        EndDate<span class="p">,</span>
        EndTime<span class="p">,</span>
        StartDateTime<span class="p">,</span>
        EndDateTime<span class="p">,</span>
        MyData<span class="o">$</span>Calories<span class="p">,</span>
        MyData<span class="o">$</span>Distance<span class="p">,</span>
        MyData<span class="o">$</span>Flights<span class="p">,</span>
        MyData<span class="o">$</span>HeartRate<span class="p">,</span>
        MyData<span class="o">$</span>Steps<span class="p">))</span>

    <span class="c1"># Neaten up names</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">1</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;StartDate&#34;</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">2</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;StartTime&#34;</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">3</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;EndDate&#34;</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">4</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;EndTime&#34;</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">5</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;StartDateTime&#34;</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">6</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;EndDateTime&#34;</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">7</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;Calories&#34;</span> <span class="c1"># kcal</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">8</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;Distance&#34;</span> <span class="c1"># In miles</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">9</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;Flights&#34;</span> <span class="c1"># count</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">10</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;HeartRate&#34;</span> <span class="c1"># bpm</span>
    <span class="kp">names</span><span class="p">(</span>MyFormattedData<span class="p">)[</span><span class="m">11</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&#34;Steps&#34;</span> <span class="c1"># count</span>

    <span class="kr">return</span><span class="p">(</span>MyFormattedData<span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Applying this to our dataset</span>
DailyData <span class="o">&lt;-</span> FormatData<span class="p">(</span>MyCsvData<span class="p">)</span>
HourlyData <span class="o">&lt;-</span> FormatData<span class="p">(</span>MyCsvDataHourly<span class="p">)</span></code></pre></div>
<h1 id="analysis">Analysis<a href="#analysis" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>

<p>We first produce a plot of steps against time, with some additional stratification in the form of heart rate using the following script and our hourly dataset (for greater resolution).</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R">ggplot<span class="p">(</span>HourlyData<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> StartDate<span class="p">,</span> y <span class="o">=</span> Steps<span class="p">))</span> <span class="o">+</span>
geom_point<span class="p">(</span>aes<span class="p">(</span>size <span class="o">=</span> HeartRate<span class="p">,</span> alpha <span class="o">=</span> Steps<span class="p">),</span> col <span class="o">=</span> <span class="s">&#34;Blue&#34;</span><span class="p">)</span> <span class="o">+</span>
theme_classic<span class="p">()</span></code></pre></div>
<p><img src="../../images/apple-watch-health/Steps-HeartRate-1.png" alt="Steps-HeartRate" /></p>

<p>The first thing we see is a considerable amount of 0-step hours in the data. This is because I sleep for about 6 hours per night, or perhaps may have not worn my watch that day. In any case, it is advisable to remove these zero values. However, it is nice to see the colour that including my heart rate from May 2015 adds to the plot. The large points in the upper right of the figure are likely from periods of exercise (as will be discussed later).</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Cutting the crap</span>
NonZero <span class="o">&lt;-</span> filter<span class="p">(</span>HourlyData<span class="p">,</span>Steps <span class="o">!=</span> <span class="m">0</span><span class="p">)</span>

<span class="c1"># Re-do the previous plot</span>
ggplot<span class="p">(</span>NonZero<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> StartDate<span class="p">,</span> y <span class="o">=</span> Steps<span class="p">))</span> <span class="o">+</span>
geom_point<span class="p">(</span>aes<span class="p">(</span>size <span class="o">=</span> HeartRate<span class="p">,</span> alpha <span class="o">=</span> Steps<span class="p">),</span> col <span class="o">=</span> <span class="s">&#34;Blue&#34;</span><span class="p">)</span> <span class="o">+</span>
theme_classic<span class="p">()</span></code></pre></div>
<p><img src="../../images/apple-watch-health/Steps-HeartRate-2.png" alt="Steps-HeartRate" /></p>

<p>That&rsquo;s better! Right, now some for simple regression analysis.</p>

<h2 id="simple-regression">Simple Regression<a href="#simple-regression" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h2>

<blockquote>
<p><strong><em>&ldquo;Irrespective of workouts, has the Apple Watch increased the number of steps I walk each day?&rdquo;</em></strong></p>
</blockquote>

<p>To answer this question, we are going to build a simple regression model; but first, we must add a new column informing the data of whether I owned the watch on a particular day.</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R"><span class="c1"># Cut the zero-step data from the dataset (as before)</span>
theData <span class="o">&lt;-</span> filter<span class="p">(</span>DailyData<span class="p">,</span>Steps <span class="o">!=</span> <span class="m">0</span><span class="p">)</span>

<span class="c1"># 3rd of May 2015 was the day I bought my Apple Watch</span>
<span class="c1"># Add a column with &#39;1&#39; if date &gt;= 3rd of May 2015, else &#39;0&#39;</span>
theData <span class="o">&lt;-</span> mutate<span class="p">(</span>theData<span class="p">,</span> Watch <span class="o">=</span> <span class="kp">ifelse</span><span class="p">(</span>StartDate <span class="o">&gt;=</span> <span class="s">&#34;2015-05-03&#34;</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">0</span><span class="p">))</span></code></pre></div>
<p>If we a create a simple linear model model with &lsquo;Steps&rsquo; as the dependent variable (the outcome whose variation is being studied), and &lsquo;Watch&rsquo; as the independent variable (input or potential reason for variation).</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R">fit1 <span class="o">&lt;-</span> lm<span class="p">(</span>Steps <span class="o">~</span> Watch<span class="p">,</span> data <span class="o">=</span> theData<span class="p">)</span>
<span class="kp">summary</span><span class="p">(</span>fit1<span class="p">)</span>

<span class="c1"># Call:</span>
<span class="c1"># lm(formula = Steps ~ Watch, data = theData)</span>

<span class="c1"># Residuals:</span>
<span class="c1">#     Min      1Q  Median      3Q     Max</span>
<span class="c1"># -6849.3 -2993.1   -60.1  2352.2 13485.9</span>

<span class="c1"># Coefficients:</span>
<span class="c1">#             Estimate Std. Error t value Pr(&gt;|t|)</span>
<span class="c1"># (Intercept)   5328.1      247.5  21.531  &lt; 2e-16 ***</span>
<span class="c1"># Watch         1611.2      408.7   3.942 9.82e-05 ***</span>
<span class="c1"># ---</span>
<span class="c1"># Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>

<span class="c1"># Residual standard error: 3637 on 339 degrees of freedom</span>
<span class="c1"># Multiple R-squared:  0.04383,   Adjusted R-squared:  0.04101</span>
<span class="c1"># F-statistic: 15.54 on 1 and 339 DF,  p-value: 9.819e-05</span></code></pre></div>
<p>From this simple model, we see that prior to buying the watch, I walked an average of 5,328 steps per day (the intercept of the model); yes, not very many steps. However, after buying the watch, I walked an average of 1,611 <em>more</em> steps per day &ndash; great!</p>

<p>Although the R-squared value, the coefficient of determination, (or in english, how close the data fit to the model), is only 4%. This means that the presence of the watch only explains 4% of the variation in my daily steps. This is because we have yet to control for other factors, such as the day of the week, or whether I was exercising at the time. The model is saying that the presence of the watch in my life is not the sole reason for my movement. However, the value of R-squared should always be taken with a pinch of salt. There is inherent randomness in my daily steps and it would be near impossible to control for all additional covariates. As the F-statistic shows a statistically significant relationship (p &lt; 0.05), we accept that the watch has improved my fitness level. Checks of the residuals increase our confidence in the findings.</p>
<div class="highlight"><pre class="chroma"><code class="language-R" data-lang="R">ggplot<span class="p">(</span>theData<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> StartDate<span class="p">,</span> y <span class="o">=</span> Steps<span class="p">))</span> <span class="o">+</span>
geom_point<span class="p">(</span>aes<span class="p">(</span>col <span class="o">=</span> <span class="kp">as.factor</span><span class="p">(</span>Watch<span class="p">)),</span> alpha <span class="o">=</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span>
theme_classic<span class="p">()</span> <span class="o">+</span>
geom_smooth<span class="p">(</span>method <span class="o">=</span> <span class="s">&#34;lm&#34;</span><span class="p">,</span> col <span class="o">=</span> <span class="s">&#34;red&#34;</span><span class="p">,</span> fill <span class="o">=</span> <span class="s">&#34;blue&#34;</span><span class="p">)</span> <span class="o">+</span>
labs<span class="p">(</span>title <span class="o">=</span> <span class="kp">paste</span><span class="p">(</span><span class="s">&#34;Linear Regression of presence of Apple Watch against daily activity in steps\nAdj R2 = &#34;</span><span class="p">,</span><span class="kp">signif</span><span class="p">(</span><span class="kp">summary</span><span class="p">(</span>fit1<span class="p">)</span><span class="o">$</span>adj.r.squared<span class="p">,</span> <span class="m">5</span><span class="p">),</span>
    <span class="s">&#34;Intercept =&#34;</span><span class="p">,</span><span class="kp">signif</span><span class="p">(</span>fit1<span class="o">$</span>coef<span class="p">[[</span><span class="m">1</span><span class="p">]],</span><span class="m">5</span> <span class="p">),</span>
    <span class="s">&#34; Slope =&#34;</span><span class="p">,</span><span class="kp">signif</span><span class="p">(</span>fit1<span class="o">$</span>coef<span class="p">[[</span><span class="m">2</span><span class="p">]],</span> <span class="m">5</span><span class="p">),</span>
    <span class="s">&#34; P =&#34;</span><span class="p">,</span><span class="kp">signif</span><span class="p">(</span><span class="kp">summary</span><span class="p">(</span>fit1<span class="p">)</span><span class="o">$</span>coef<span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="m">4</span><span class="p">],</span> <span class="m">5</span><span class="p">))</span>
<span class="p">)</span></code></pre></div>
<p><img src="../../images/apple-watch-health/LinearRegression.png" alt="Regression" /></p>

<h1 id="an-aside">An Aside<a href="#an-aside" class="anchor" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h3a5 5 0 0 1 5 5 5 5 0 0 1-5 5h-3m-6 0H6a5 5 0 0 1-5-5 5 5 0 0 1 5-5h3"></path><line x1="8" y1="12" x2="16" y2="12"></line></svg></a></h1>

<p>As a quick end to this post, I wanted to see what my hourly heart rate looked like over time. Additionally, I was keen to see whether my heart rate ever drops below 40bpm (bradycardia) or above 120bpm (tachycardia). As we see from the figure below, my heart rate doesn&rsquo;t drop below 40bpm and only rarely steps about 120bpm. It should be noted that the outliers ~200bpm are from periods of exercise. As I collect more data, and exercise more, I would hope to look for a downward trend in my heart rate as my maximum heart rate when exercising declines, indicating increased fitness, one would hope.</p>

<p><img src="../../images/apple-watch-health/Heart-Rate.png" alt="Heart-Rate" /></p>

			</div>
			<hr class="post-end">
			<footer class="post-info">
				<p>
					<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://jackolney.github.io/tags/r">R</a></span><span class="tag"><a href="https://jackolney.github.io/tags/apple-watch">Apple Watch</a></span>
				</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>1323 Words</p>
				<p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2015-12-27 09:41 &#43;0000</p>
			</footer>
		</article>
		<div class="post-nav thin">
			<a class="next-post" href="https://jackolney.github.io/posts/2016-01-09-hubot/">
				<span class="post-nav-label"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>&nbsp;Newer</span><br><span>Hubot - a Siri to call my own</span>
			</a>
			<a class="prev-post" href="https://jackolney.github.io/posts/2015-10-16-shiny-cascade/">
				<span class="post-nav-label">Older&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg></span><br><span>Interactive Dynamic Models in R</span>
			</a>
		</div>
		<div id="comments" class="thin">
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "jackolney" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	</main>

	<footer id="site-footer" class="section-inner thin animated fadeIn faster">
		<p>&copy; 2020 <a href="https://jackolney.github.io/">Jack Olney</a> &#183; <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></p>
		<p>
			Made with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> &#183; Theme <a href="https://github.com/Track3/hermit" target="_blank" rel="noopener">Hermit</a> &#183; <a href="https://jackolney.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a>
		</p>
	</footer>


	<script src="https://jackolney.github.io/js/main.min.35ccbf1cdceb91e4c64c06b5d009d6e2977fafe56beda7762febd4e67528d2ac.js" integrity="sha256-Ncy/HNzrkeTGTAa10AnW4pd/r+Vr7ad2L+vU5nUo0qw="></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-123-45', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</body>

</html>
