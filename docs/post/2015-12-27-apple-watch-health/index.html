    <!DOCTYPE html>
<html lang="en-us">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="author" content="Jack Olney">
		<meta name="description" content="blogging about science and technology">
		<meta name="generator" content="Hugo 0.19" />
		<title>Has the Apple Watch improved my fitness? &middot; Jack Olney</title>
		<link rel="shortcut icon" href="https://jackolney.github.io/blogimages/favicon.ico">
		<link rel="stylesheet" href="https://jackolney.github.io/blogcss/style.css">
		<link rel="stylesheet" href="https://jackolney.github.io/blogcss/highlight.css">
		

		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css">
		

		
		<link href="https://jackolney.github.io/blog/index.xml" rel="alternate" type="application/rss+xml" title="Jack Olney" />
		

		<meta property="og:title" content="Has the Apple Watch improved my fitness?" />
<meta property="og:description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jackolney.github.io/blog/post/2015-12-27-apple-watch-health/" />



<meta property="article:published_time" content="2015-12-27T09:41:00&#43;00:00"/>
<meta property="article:modified_time" content="2015-12-27T09:41:00&#43;00:00"/>











	    
	    
<meta itemprop="name" content="Has the Apple Watch improved my fitness?">
<meta itemprop="description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?">


<meta itemprop="dateModified" content="2015-12-27T09:41:00&#43;00:00" />
<meta itemprop="wordCount" content="1323">



<meta itemprop="keywords" content="apple,conference,google,programming,shiny,slack,thesis,writing,apple,apple-watch,bot,c&#43;&#43;,care-cascade,croi,css,ggplot2,google,hiv,hubot,keynote,latex,phd,python,r,sacema,shiny,showtext,slack,thesis,truetype,webfonts,writing," />

	    

  <meta name="twitter:card" content="summary"/>



<meta name="twitter:text:title" content="Has the Apple Watch improved my fitness?"/>
<meta name="twitter:title" content="Has the Apple Watch improved my fitness?"/>
<meta name="twitter:description" content="Does the presence of an Apple Watch correlate with an increase in my daily steps?"/>
<meta name="twitter:site" content="@https://www.twitter.com/OlneyJack"/>

	</head>

    <body>
       <nav class="main-nav">
	
	
		<a href='https://jackolney.github.io/blog'> <span class="arrow">←</span>Home</a>
	

	
		<a href='https://jackolney.github.io/blogabout'>About me</a>
	

	
	<a class="cta" href="https://jackolney.github.io/blog/index.xml">Subscribe</a>
	
</nav>

        <section id="wrapper">
            <article class="post">
                <header>
                    <h1>Has the Apple Watch improved my fitness?</h1>
                    <h2 class="headline">
                    December 27, 2015 
                    <br>
                    
                    
                        
                            <a href="https://jackolney.github.io/blogtags/r">R</a>
                        
                            <a href="https://jackolney.github.io/blogtags/apple-watch">Apple Watch</a>
                        
                    
                    
                    </h2>
                </header>
                <section id="post-body">
                    

<h1 id="overview">Overview</h1>

<p>Having owned an Apple Watch since early May, I have built up a substantial amount of data in Apple&rsquo;s &lsquo;HealthKit&rsquo;, detailing my daily steps from in excess of a year prior to owning the watch to at least six months after. Therefore, a simple analysis of whether the watch has improved my fitness should be possible. Additionally, I can pull out heart-rate data, stair-flight data, exercise data and map a whole bunch of other interesting stuff.</p>

<p>All data is from my iPhone 6+ and my Apple Watch, all analysis was conducted in R and all figures were produced with ggplot2.</p>

<h1 id="setup">Setup</h1>

<p>The first thing to do is it to export the relevant data from &lsquo;HealthKit&rsquo; as a csv file. We do this using the <a href="https://itunes.apple.com/gb/app/qs-access/id920297614?mt=8">QS Access</a> iOS app from the App Store. The app allows you to define the columns by selecting the relevant data to export (e.g. Steps, Heart Rate etc.) and then define rows as being hourly or daily. The simplest way to transfer the csv from iPhone to Mac is via email. Now we can jump right into R and start cleaning the data.</p>

<h2 id="data-cleaning">Data Cleaning</h2>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e"># Set the working directory to the folder containing the exported .csv</span>
<span style="color: #66d9ef">setwd</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;~/&quot;</span><span style="color: #f8f8f2">)</span>

<span style="color: #75715e"># Load &#39;dplyr&#39; and &#39;ggplot2&#39; for data analysis and plotting</span>
<span style="color: #f92672">require</span><span style="color: #f8f8f2">(</span>dplyr<span style="color: #f8f8f2">)</span>
<span style="color: #f92672">require</span><span style="color: #f8f8f2">(</span>ggplot2<span style="color: #f8f8f2">)</span>

<span style="color: #75715e"># Load in the exported .csv file</span>
<span style="color: #75715e"># The data I am importing was exported from my iPhone on 4th September, 2015</span>
MyCsvData <span style="color: #f92672">&lt;-</span> read.csv<span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;./HealthData/HealthData_04-09-15.csv&quot;</span><span style="color: #f8f8f2">)</span>
MyCsvDataHourly <span style="color: #f92672">&lt;-</span> read.csv<span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;./HealthData/HealthDataHourly_04-09-15.csv&quot;</span><span style="color: #f8f8f2">)</span>
</pre></div>

<p>Probably the most time consuming aspect of any data analysis is cleaning and correctly formatting the data. Here, we must ensure that R can understand the exported date format correctly. To rectify this we define a function <code>FormatData()</code> which takes the entire dataframe as an arguement and returns a dataframe containing the correct date format.</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>FormatData <span style="color: #f92672">&lt;-</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span>Data<span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #75715e"># Define the &#39;Start&#39; and &#39;End&#39; columns.</span>
    StartDate <span style="color: #f92672">&lt;-</span> <span style="color: #66d9ef">as.Date</span><span style="color: #f8f8f2">(</span>Data<span style="color: #f92672">$</span>Start<span style="color: #f8f8f2">,</span>format<span style="color: #f92672">=</span><span style="color: #e6db74">&quot;%d-%b-%Y %H:%M&quot;</span><span style="color: #f8f8f2">)</span>
    EndDate <span style="color: #f92672">&lt;-</span> <span style="color: #66d9ef">as.Date</span><span style="color: #f8f8f2">(</span>Data<span style="color: #f92672">$</span>Finish<span style="color: #f8f8f2">,</span>format<span style="color: #f92672">=</span><span style="color: #e6db74">&quot;%d-%b-%Y %H:%M&quot;</span><span style="color: #f8f8f2">)</span>

    <span style="color: #75715e"># Turn into a smart dataframe.</span>
    <span style="color: #75715e"># if you print a tbl_df to screen only the first 10 rows are shown.</span>
    MyData <span style="color: #f92672">&lt;-</span> tbl_df<span style="color: #f8f8f2">(</span>Data<span style="color: #f8f8f2">)</span>

    <span style="color: #75715e"># Cleanup data.names</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;StartTime&quot;</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;EndTime&quot;</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">3</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;Calories&quot;</span> <span style="color: #75715e"># kcal</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">4</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;Distance&quot;</span> <span style="color: #75715e"># In miles</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">5</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;Flights&quot;</span> <span style="color: #75715e"># count</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">6</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;HeartRate&quot;</span> <span style="color: #75715e"># bpm</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">7</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;Steps&quot;</span> <span style="color: #75715e"># count</span>

    <span style="color: #75715e"># Formatting date. #</span>
    <span style="color: #75715e">####################</span>
    <span style="color: #75715e"># Code    Value</span>
    <span style="color: #75715e"># %d  Day of the month (decimal number)</span>
    <span style="color: #75715e"># %m  Month (decimal number)</span>
    <span style="color: #75715e"># %b  Month (abbreviated)</span>
    <span style="color: #75715e"># %B  Month (full name)</span>
    <span style="color: #75715e"># %y  Year (2 digit)</span>
    <span style="color: #75715e"># %Y  Year (4 digit)</span>

    <span style="color: #75715e"># Deploy and mutate whole dataFrame</span>
    FormatDate <span style="color: #f92672">&lt;-</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span>x<span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">format</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">strptime</span><span style="color: #f8f8f2">(</span>TestDate<span style="color: #f8f8f2">,</span><span style="color: #e6db74">&quot;%d-%b-%Y %H:%M&quot;</span><span style="color: #f8f8f2">),</span><span style="color: #e6db74">&quot;%d-%m-%Y&quot;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #f8f8f2">}</span>

    FormatTime <span style="color: #f92672">&lt;-</span> <span style="color: #66d9ef">function</span><span style="color: #f8f8f2">(</span>x<span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">format</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">strptime</span><span style="color: #f8f8f2">(</span>x<span style="color: #f8f8f2">,</span><span style="color: #e6db74">&quot;%d-%b-%Y %H:%M&quot;</span><span style="color: #f8f8f2">),</span><span style="color: #e6db74">&quot;%H:%M&quot;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #75715e"># StartDate &lt;- apply(MyData[1],2,FormatDate)</span>
    StartTime <span style="color: #f92672">&lt;-</span> <span style="color: #66d9ef">apply</span><span style="color: #f8f8f2">(</span>MyData<span style="color: #f8f8f2">[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">],</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span>FormatTime<span style="color: #f8f8f2">)</span>
    StartDateTime <span style="color: #f92672">&lt;-</span> MyData<span style="color: #f8f8f2">[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">]</span>

    <span style="color: #75715e"># EndDate &lt;- apply(MyData[2],2,FormatDate)</span>
    EndTime <span style="color: #f92672">&lt;-</span> <span style="color: #66d9ef">apply</span><span style="color: #f8f8f2">(</span>MyData<span style="color: #f8f8f2">[</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">],</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span>FormatTime<span style="color: #f8f8f2">)</span>
    EndDateTime <span style="color: #f92672">&lt;-</span> MyData<span style="color: #f8f8f2">[</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">]</span>

    <span style="color: #75715e"># Pull together a new dataframe</span>
    MyFormattedData <span style="color: #f92672">&lt;-</span> tbl_df<span style="color: #f8f8f2">(</span><span style="color: #66d9ef">data.frame</span><span style="color: #f8f8f2">(</span>
        StartDate<span style="color: #f8f8f2">,</span>
        StartTime<span style="color: #f8f8f2">,</span>
        EndDate<span style="color: #f8f8f2">,</span>
        EndTime<span style="color: #f8f8f2">,</span>
        StartDateTime<span style="color: #f8f8f2">,</span>
        EndDateTime<span style="color: #f8f8f2">,</span>
        MyData<span style="color: #f92672">$</span>Calories<span style="color: #f8f8f2">,</span>
        MyData<span style="color: #f92672">$</span>Distance<span style="color: #f8f8f2">,</span>
        MyData<span style="color: #f92672">$</span>Flights<span style="color: #f8f8f2">,</span>
        MyData<span style="color: #f92672">$</span>HeartRate<span style="color: #f8f8f2">,</span>
        MyData<span style="color: #f92672">$</span>Steps<span style="color: #f8f8f2">))</span>

    <span style="color: #75715e"># Neaten up names</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;StartDate&quot;</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;StartTime&quot;</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">3</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;EndDate&quot;</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">4</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;EndTime&quot;</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">5</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;StartDateTime&quot;</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">6</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;EndDateTime&quot;</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">7</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;Calories&quot;</span> <span style="color: #75715e"># kcal</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">8</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;Distance&quot;</span> <span style="color: #75715e"># In miles</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">9</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;Flights&quot;</span> <span style="color: #75715e"># count</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">10</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;HeartRate&quot;</span> <span style="color: #75715e"># bpm</span>
    <span style="color: #66d9ef">names</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)[</span><span style="color: #ae81ff">11</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">&lt;-</span> <span style="color: #e6db74">&quot;Steps&quot;</span> <span style="color: #75715e"># count</span>

    <span style="color: #66d9ef">return</span><span style="color: #f8f8f2">(</span>MyFormattedData<span style="color: #f8f8f2">)</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #75715e"># Applying this to our dataset</span>
DailyData <span style="color: #f92672">&lt;-</span> FormatData<span style="color: #f8f8f2">(</span>MyCsvData<span style="color: #f8f8f2">)</span>
HourlyData <span style="color: #f92672">&lt;-</span> FormatData<span style="color: #f8f8f2">(</span>MyCsvDataHourly<span style="color: #f8f8f2">)</span>
</pre></div>

<h1 id="analysis">Analysis</h1>

<p>We first produce a plot of steps against time, with some additional stratification in the form of heart rate using the following script and our hourly dataset (for greater resolution).</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>ggplot<span style="color: #f8f8f2">(</span>HourlyData<span style="color: #f8f8f2">,</span> aes<span style="color: #f8f8f2">(</span>x <span style="color: #f92672">=</span> StartDate<span style="color: #f8f8f2">,</span> y <span style="color: #f92672">=</span> Steps<span style="color: #f8f8f2">))</span> <span style="color: #f92672">+</span>
geom_point<span style="color: #f8f8f2">(</span>aes<span style="color: #f8f8f2">(</span>size <span style="color: #f92672">=</span> HeartRate<span style="color: #f8f8f2">,</span> alpha <span style="color: #f92672">=</span> Steps<span style="color: #f8f8f2">),</span> col <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Blue&quot;</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">+</span>
theme_classic<span style="color: #f8f8f2">()</span>
</pre></div>

<p><img src="../../images/apple-watch-health/Steps-HeartRate-1.png" alt="Steps-HeartRate" /></p>

<p>The first thing we see is a considerable amount of 0-step hours in the data. This is because I sleep for about 6 hours per night, or perhaps may have not worn my watch that day. In any case, it is advisable to remove these zero values. However, it is nice to see the colour that including my heart rate from May 2015 adds to the plot. The large points in the upper right of the figure are likely from periods of exercise (as will be discussed later).</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e"># Cutting the crap</span>
NonZero <span style="color: #f92672">&lt;-</span> filter<span style="color: #f8f8f2">(</span>HourlyData<span style="color: #f8f8f2">,</span>Steps <span style="color: #f92672">!=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">)</span>

<span style="color: #75715e"># Re-do the previous plot</span>
ggplot<span style="color: #f8f8f2">(</span>NonZero<span style="color: #f8f8f2">,</span> aes<span style="color: #f8f8f2">(</span>x <span style="color: #f92672">=</span> StartDate<span style="color: #f8f8f2">,</span> y <span style="color: #f92672">=</span> Steps<span style="color: #f8f8f2">))</span> <span style="color: #f92672">+</span>
geom_point<span style="color: #f8f8f2">(</span>aes<span style="color: #f8f8f2">(</span>size <span style="color: #f92672">=</span> HeartRate<span style="color: #f8f8f2">,</span> alpha <span style="color: #f92672">=</span> Steps<span style="color: #f8f8f2">),</span> col <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;Blue&quot;</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">+</span>
theme_classic<span style="color: #f8f8f2">()</span>
</pre></div>

<p><img src="../../images/apple-watch-health/Steps-HeartRate-2.png" alt="Steps-HeartRate" /></p>

<p>That&rsquo;s better! Right, now some for simple regression analysis.</p>

<h2 id="simple-regression">Simple Regression</h2>

<blockquote>
<p><strong><em>&ldquo;Irrespective of workouts, has the Apple Watch increased the number of steps I walk each day?&rdquo;</em></strong></p>
</blockquote>

<p>To answer this question, we are going to build a simple regression model; but first, we must add a new column informing the data of whether I owned the watch on a particular day.</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span><span style="color: #75715e"># Cut the zero-step data from the dataset (as before)</span>
theData <span style="color: #f92672">&lt;-</span> filter<span style="color: #f8f8f2">(</span>DailyData<span style="color: #f8f8f2">,</span>Steps <span style="color: #f92672">!=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">)</span>

<span style="color: #75715e"># 3rd of May 2015 was the day I bought my Apple Watch</span>
<span style="color: #75715e"># Add a column with &#39;1&#39; if date &gt;= 3rd of May 2015, else &#39;0&#39;</span>
theData <span style="color: #f92672">&lt;-</span> mutate<span style="color: #f8f8f2">(</span>theData<span style="color: #f8f8f2">,</span> Watch <span style="color: #f92672">=</span> <span style="color: #66d9ef">ifelse</span><span style="color: #f8f8f2">(</span>StartDate <span style="color: #f92672">&gt;=</span> <span style="color: #e6db74">&quot;2015-05-03&quot;</span><span style="color: #f8f8f2">,</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">))</span>
</pre></div>

<p>If we a create a simple linear model model with &lsquo;Steps&rsquo; as the dependent variable (the outcome whose variation is being studied), and &lsquo;Watch&rsquo; as the independent variable (input or potential reason for variation).</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>fit1 <span style="color: #f92672">&lt;-</span> lm<span style="color: #f8f8f2">(</span>Steps <span style="color: #f92672">~</span> Watch<span style="color: #f8f8f2">,</span> data <span style="color: #f92672">=</span> theData<span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">summary</span><span style="color: #f8f8f2">(</span>fit1<span style="color: #f8f8f2">)</span>

<span style="color: #75715e"># Call:</span>
<span style="color: #75715e"># lm(formula = Steps ~ Watch, data = theData)</span>

<span style="color: #75715e"># Residuals:</span>
<span style="color: #75715e">#     Min      1Q  Median      3Q     Max</span>
<span style="color: #75715e"># -6849.3 -2993.1   -60.1  2352.2 13485.9</span>

<span style="color: #75715e"># Coefficients:</span>
<span style="color: #75715e">#             Estimate Std. Error t value Pr(&gt;|t|)</span>
<span style="color: #75715e"># (Intercept)   5328.1      247.5  21.531  &lt; 2e-16 ***</span>
<span style="color: #75715e"># Watch         1611.2      408.7   3.942 9.82e-05 ***</span>
<span style="color: #75715e"># ---</span>
<span style="color: #75715e"># Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span>

<span style="color: #75715e"># Residual standard error: 3637 on 339 degrees of freedom</span>
<span style="color: #75715e"># Multiple R-squared:  0.04383,   Adjusted R-squared:  0.04101</span>
<span style="color: #75715e"># F-statistic: 15.54 on 1 and 339 DF,  p-value: 9.819e-05</span>
</pre></div>

<p>From this simple model, we see that prior to buying the watch, I walked an average of 5,328 steps per day (the intercept of the model); yes, not very many steps. However, after buying the watch, I walked an average of 1,611 <em>more</em> steps per day &ndash; great!</p>

<p>Although the R-squared value, the coefficient of determination, (or in english, how close the data fit to the model), is only 4%. This means that the presence of the watch only explains 4% of the variation in my daily steps. This is because we have yet to control for other factors, such as the day of the week, or whether I was exercising at the time. The model is saying that the presence of the watch in my life is not the sole reason for my movement. However, the value of R-squared should always be taken with a pinch of salt. There is inherent randomness in my daily steps and it would be near impossible to control for all additional covariates. As the F-statistic shows a statistically significant relationship (p &lt; 0.05), we accept that the watch has improved my fitness level. Checks of the residuals increase our confidence in the findings.</p>
<div class="highlight" style="background: #272822"><pre style="line-height: 125%"><span></span>ggplot<span style="color: #f8f8f2">(</span>theData<span style="color: #f8f8f2">,</span> aes<span style="color: #f8f8f2">(</span>x <span style="color: #f92672">=</span> StartDate<span style="color: #f8f8f2">,</span> y <span style="color: #f92672">=</span> Steps<span style="color: #f8f8f2">))</span> <span style="color: #f92672">+</span>
geom_point<span style="color: #f8f8f2">(</span>aes<span style="color: #f8f8f2">(</span>col <span style="color: #f92672">=</span> <span style="color: #66d9ef">as.factor</span><span style="color: #f8f8f2">(</span>Watch<span style="color: #f8f8f2">)),</span> alpha <span style="color: #f92672">=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">+</span>
theme_classic<span style="color: #f8f8f2">()</span> <span style="color: #f92672">+</span>
geom_smooth<span style="color: #f8f8f2">(</span>method <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;lm&quot;</span><span style="color: #f8f8f2">,</span> col <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;red&quot;</span><span style="color: #f8f8f2">,</span> fill <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;blue&quot;</span><span style="color: #f8f8f2">)</span> <span style="color: #f92672">+</span>
labs<span style="color: #f8f8f2">(</span>title <span style="color: #f92672">=</span> <span style="color: #66d9ef">paste</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;Linear Regression of presence of Apple Watch against daily activity in steps\nAdj R2 = &quot;</span><span style="color: #f8f8f2">,</span><span style="color: #66d9ef">signif</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">summary</span><span style="color: #f8f8f2">(</span>fit1<span style="color: #f8f8f2">)</span><span style="color: #f92672">$</span>adj.r.squared<span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2">),</span>
    <span style="color: #e6db74">&quot;Intercept =&quot;</span><span style="color: #f8f8f2">,</span><span style="color: #66d9ef">signif</span><span style="color: #f8f8f2">(</span>fit1<span style="color: #f92672">$</span>coef<span style="color: #f8f8f2">[[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">]],</span><span style="color: #ae81ff">5</span> <span style="color: #f8f8f2">),</span>
    <span style="color: #e6db74">&quot; Slope =&quot;</span><span style="color: #f8f8f2">,</span><span style="color: #66d9ef">signif</span><span style="color: #f8f8f2">(</span>fit1<span style="color: #f92672">$</span>coef<span style="color: #f8f8f2">[[</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">]],</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2">),</span>
    <span style="color: #e6db74">&quot; P =&quot;</span><span style="color: #f8f8f2">,</span><span style="color: #66d9ef">signif</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">summary</span><span style="color: #f8f8f2">(</span>fit1<span style="color: #f8f8f2">)</span><span style="color: #f92672">$</span>coef<span style="color: #f8f8f2">[</span><span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span><span style="color: #ae81ff">4</span><span style="color: #f8f8f2">],</span> <span style="color: #ae81ff">5</span><span style="color: #f8f8f2">))</span>
<span style="color: #f8f8f2">)</span>
</pre></div>

<p><img src="../../images/apple-watch-health/LinearRegression.png" alt="Regression" /></p>

<h1 id="an-aside">An Aside</h1>

<p>As a quick end to this post, I wanted to see what my hourly heart rate looked like over time. Additionally, I was keen to see whether my heart rate ever drops below 40bpm (bradycardia) or above 120bpm (tachycardia). As we see from the figure below, my heart rate doesn&rsquo;t drop below 40bpm and only rarely steps about 120bpm. It should be noted that the outliers ~200bpm are from periods of exercise. As I collect more data, and exercise more, I would hope to look for a downward trend in my heart rate as my maximum heart rate when exercising declines, indicating increased fitness, one would hope.</p>

<p><img src="../../images/apple-watch-health/Heart-Rate.png" alt="Heart-Rate" /></p>

                </section>
            </article>
            <footer id="post-meta" class="clearfix">
                <a href="https://twitter.com/OlneyJack">
                        <img class="avatar" src="https://jackolney.github.io/blogimages/avatar.png">
                        <div>
                            <span class="dark">Jack Olney</span>
                            <span>Please let me know what you think</span>
                        </div>
                    </a>
                <section id="sharing">
                    <a class="twitter" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fjackolney.github.io%2fblog%2fpost%2f2015-12-27-apple-watch-health%2f - Has%20the%20Apple%20Watch%20improved%20my%20fitness%3f by @OlneyJack"><span class="icon-twitter"> Tweet</span></a>

<a class="facebook" href="#" onclick="
    window.open(
      'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
      'facebook-share-dialog',
      'width=626,height=436');
    return false;"><span class="icon-facebook-rect"> Share</span>
</a>

                </section>
            </footer>

            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'jackolney';
    var disqus_identifier = 'https:\/\/jackolney.github.io\/blog\/post\/2015-12-27-apple-watch-health\/';
    var disqus_title = 'Has the Apple Watch improved my fitness?';
    var disqus_url = 'https:\/\/jackolney.github.io\/blog\/post\/2015-12-27-apple-watch-health\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

            <ul id="post-list" class="archive readmore">
    <h3>More...</h3>

    
    
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2017-02-21-croi/">CROI 2017<aside class="dates">Feb 21</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-11-17-thesis/">Writing a PhD Thesis<aside class="dates">Nov 17</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-08-15-ggplot2-font/">Webfonts in ggplot2<aside class="dates">Aug 15</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-06-21-sacema/">SACEMA Quarterly<aside class="dates">Jun 21</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-04-01-shiny/">Shiny Progress Bars<aside class="dates">Apr 1</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-03-09-croi/">CROI 2016<aside class="dates">Mar 9</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2016-01-09-hubot/">Hubot - a Siri to call my own<aside class="dates">Jan 9</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2015-12-27-apple-watch-health/">Has the Apple Watch improved my fitness?<aside class="dates">Dec 27</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2015-10-16-shiny-cascade/">Interactive Dynamic Models in R<aside class="dates">Oct 16</aside></a>
        </li>
        
   
    
        
        <li>
            <a href="https://jackolney.github.io/blog/post/2015-09-09-apple-pencil/">Apple Pencil<aside class="dates">Sep 9</aside></a>
        </li>
        
   
</ul>

            <footer id="footer">
    
        <div id="social">

	
	
    <a class="symbol" href="https://www.github.com/jackolney">
        <i class="fa fa-github"></i>
    </a>
    
    <a class="symbol" href="https://www.twitter.com/OlneyJack">
        <i class="fa fa-twitter"></i>
    </a>
    


</div>

    
    <p class="small">
    
        © Copyright 2017 Jack Olney
    
    </p>
</footer>

        </section>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://jackolney.github.io/blogjs/main.js"></script>
<script src="https://jackolney.github.io/blogjs/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>




<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-71752366-1', 'auto');
ga('send', 'pageview');
</script>


    </body>
</html>
